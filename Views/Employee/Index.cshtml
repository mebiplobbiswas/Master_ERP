@using PagedList.Mvc
@using PagedList
@model IPagedList<MASERP.Models.DATAMODEL.Employee>

@{
    ViewBag.Title = "Employee List";
}

<style>
    .pagination {
        display: flex;
        padding-left: 0;
        list-style: none;
        border-radius: 0.25rem;
    }

        .pagination li {
            margin: 0 3px;
        }

            .pagination li a, .pagination li span {
                color: #007bff;
                text-decoration: none;
                border: 1px solid #dee2e6;
                padding: 6px 12px;
                border-radius: 4px;
            }

            .pagination li.active span {
                background-color: #007bff;
                color: white;
                border-color: #007bff;
            }

</style>

<h2 class="mb-4">Employee List</h2>

<div class="row mb-3">
    <div class="col-md-4">
        @using (Html.BeginForm("Index", "Employee", FormMethod.Get))
        {
            <div class="input-group">
                @Html.TextBox("searchString", ViewBag.CurrentFilter as string, new { @class = "form-control", placeholder = "Search..." })
                <div class="input-group-append">
                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </div>
        }
    </div>
</div>

<table class="table table-bordered table-striped table-hover shadow-sm">
    <thead class="thead-dark bg-primary text-white">
        <tr>
            <th>Photo</th>
            <th>
                @Html.ActionLink("Name", "Index", new { sortOrder = ViewBag.NameSortParm, searchString = ViewBag.CurrentFilter })
            </th>
            <th>
                @Html.ActionLink("Employee Code", "Index", new { sortOrder = ViewBag.CodeSortParm, searchString = ViewBag.CurrentFilter })
            </th>
            <th>Designation</th>
            <th>Department</th>
            <th>Contact</th>
            <th>Email</th>
            <th>Joining Date</th>
            <th style="width:130px;">Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var emp in Model)
        {
            <tr>
                <td>
                    <img src="@(!string.IsNullOrEmpty(emp.ImagePath) ? Url.Content(emp.ImagePath) : Url.Content("~/Content/images/no-image.png"))"
                         alt="Photo"
                         class="rounded-circle border"
                         style="height:50px; width:50px; object-fit:cover;" />
                </td>
                <td>@emp.Name</td>
                <td>@emp.EmployeeCode</td>
                <td>@emp.Designation</td>
                <td>@emp.Department</td>
                <td>@emp.ContactNumber</td>
                <td>@emp.Email</td>
                <td>@emp.JoiningDate.ToString("yyyy-MM-dd")</td>
                <td>
                    <a href="@Url.Action("Edit", new { id = emp.EmployeeId })" class="btn btn-sm btn-warning">Edit</a>
                    <a href="@Url.Action("Details", new { id = emp.EmployeeId })" class="btn btn-sm btn-info">Details</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="text-center">
    @Html.PagedListPager(Model, page => Url.Action("Index", new
    {
        page,
        sortOrder = ViewBag.CurrentSort,
        searchString = ViewBag.CurrentFilter
    }),
    new PagedListRenderOptions
    {
        DisplayLinkToFirstPage = PagedListDisplayMode.Always,
        DisplayLinkToLastPage = PagedListDisplayMode.Always,
        DisplayLinkToPreviousPage = PagedListDisplayMode.Always,
        DisplayLinkToNextPage = PagedListDisplayMode.Always,
        DisplayLinkToIndividualPages = true,
        DisplayPageCountAndCurrentLocation = false,
        MaximumPageNumbersToDisplay = 5,
        DisplayEllipsesWhenNotShowingAllPageNumbers = true
    })
</div>
